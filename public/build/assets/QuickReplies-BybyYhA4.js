import{f as d,c as l,b as e,d as c,q as z,F as y,r as C,t as u,k as b,v as h,s as f,o as i,n as w}from"./app-CvBBLmC7.js";import{T as U}from"./TenantLayout-B83AQDb_.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"p-6 max-w-7xl mx-auto"},T={class:"flex items-center justify-between mb-8"},A={key:0,class:"text-center py-16 bg-slate-800/50 rounded-xl border border-white/10"},F={key:1,class:"space-y-6"},O={class:"px-6 py-4 border-b border-white/10 flex items-center justify-between"},P={class:"flex items-center gap-3"},G={class:"text-2xl"},Q={class:"text-lg font-semibold text-white"},J={class:"text-xs text-slate-400"},K={key:0,class:"px-2 py-1 text-xs bg-red-500/20 text-red-400 rounded-full"},W={class:"flex items-center gap-2"},X=["onClick"],Y=["onClick","title"],Z={class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},ee={key:0,d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},te={key:1,d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},se=["onClick"],oe=["onClick"],le={key:0,class:"divide-y divide-white/5"},ie={class:"flex-1 min-w-0"},ae={class:"flex items-center gap-2 mb-1"},ne={class:"font-medium text-white truncate"},re={key:0,class:"px-2 py-0.5 text-xs bg-red-500/20 text-red-400 rounded-full"},de={class:"text-sm text-slate-400 line-clamp-2"},ue={key:0,class:"mt-2"},ce=["src"],ve={class:"flex items-center gap-1 ml-4"},ge=["onClick"],pe={class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},me={key:0,d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},xe={key:1,d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},be=["onClick"],he=["onClick"],fe={key:1,class:"px-6 py-8 text-center text-slate-400"},we=["onClick"],ke={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm"},_e={class:"bg-slate-800 rounded-xl w-full max-w-md p-6 border border-white/10 shadow-xl"},ye={class:"text-lg font-semibold text-white mb-4"},Ce={class:"space-y-4"},je={class:"flex gap-2 flex-wrap mb-2"},Ee=["onClick"],Me={class:"flex justify-end gap-3 mt-6"},ze={key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm"},$e={class:"bg-slate-800 rounded-xl w-full max-w-lg p-6 border border-white/10 shadow-xl max-h-[90vh] overflow-y-auto"},Le={class:"text-lg font-semibold text-white mb-4"},Re={class:"space-y-4"},Be={key:0,class:"relative inline-block mb-3"},Se=["src"],qe={class:"flex justify-end gap-3 mt-6"},Ue=Object.assign({layout:U},{__name:"QuickReplies",props:{categories:Array},setup($){const j=d($.categories||[]),g=d(!1),p=d(!1),m=d(null),x=d(null),E=d(null),r=d({name:"",icon:""}),n=d({title:"",body:"",image:null,remove_image:!1}),v=d(null),L=["ðŸ‘‹","ðŸŽ‰","ðŸ“¢","ðŸ’¼","ðŸ“š","â“","âœ…","âŒ","ðŸ’°","ðŸ“","ðŸ“ž","ðŸ“§","â°","ðŸŽ“","ðŸ¢"],k=(s=null)=>{m.value=s,r.value=s?{name:s.name,icon:s.icon||""}:{name:"",icon:""},g.value=!0},R=async()=>{try{m.value?await axios.put(route("quick-replies.categories.update",m.value.id),r.value):await axios.post(route("quick-replies.categories.store"),r.value),f.reload(),g.value=!1}catch(s){console.error("Error saving category:",s),alert("Error al guardar la categorÃ­a")}},B=async s=>{if(confirm(`Â¿Eliminar categorÃ­a "${s.name}" y todas sus respuestas?`))try{await axios.delete(route("quick-replies.categories.destroy",s.id)),f.reload()}catch(t){console.error("Error deleting category:",t),alert("Error al eliminar la categorÃ­a")}},S=async s=>{try{await axios.post(route("quick-replies.categories.toggle",s.id)),s.is_active=!s.is_active}catch(t){console.error("Error toggling category:",t)}},_=(s,t=null)=>{E.value=s,x.value=t,n.value=t?{title:t.title,body:t.body,image:null,remove_image:!1}:{title:"",body:"",image:null,remove_image:!1},v.value=t?.image_url||null,p.value=!0},q=s=>{const t=s.target.files[0];t&&(n.value.image=t,n.value.remove_image=!1,v.value=URL.createObjectURL(t))},H=()=>{n.value.image=null,n.value.remove_image=!0,v.value=null},V=async()=>{try{const s=new FormData;s.append("title",n.value.title),s.append("body",n.value.body),n.value.image&&s.append("image",n.value.image),n.value.remove_image&&s.append("remove_image","1"),x.value?await axios.post(route("quick-replies.update",x.value.id),s):(s.append("category_id",E.value),await axios.post(route("quick-replies.store"),s)),f.reload(),p.value=!1}catch(s){console.error("Error saving reply:",s),alert("Error al guardar la respuesta")}},D=async s=>{if(confirm(`Â¿Eliminar respuesta "${s.title}"?`))try{await axios.delete(route("quick-replies.destroy",s.id)),f.reload()}catch(t){console.error("Error deleting reply:",t),alert("Error al eliminar la respuesta")}},N=async s=>{try{await axios.post(route("quick-replies.toggle",s.id)),s.is_active=!s.is_active}catch(t){console.error("Error toggling reply:",t)}};return(s,t)=>(i(),l("div",I,[e("div",T,[t[9]||(t[9]=e("div",null,[e("h1",{class:"text-3xl font-bold text-white flex items-center gap-3"},[e("span",{class:"text-4xl"},"âš¡"),z(" Respuestas RÃ¡pidas ")]),e("p",{class:"text-slate-400 mt-1"},"Crea y organiza mensajes predefinidos para usar en el chat")],-1)),e("button",{onClick:t[0]||(t[0]=o=>k()),class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg flex items-center gap-2 transition-colors"},[...t[8]||(t[8]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),z(" Nueva CategorÃ­a ",-1)])])]),j.value.length===0?(i(),l("div",A,[t[10]||(t[10]=e("div",{class:"text-6xl mb-4"},"ðŸ“",-1)),t[11]||(t[11]=e("h3",{class:"text-xl font-semibold text-white mb-2"},"Sin categorÃ­as",-1)),t[12]||(t[12]=e("p",{class:"text-slate-400 mb-6"},"Crea tu primera categorÃ­a para organizar tus respuestas",-1)),e("button",{onClick:t[1]||(t[1]=o=>k()),class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors"}," Crear CategorÃ­a ")])):(i(),l("div",F,[(i(!0),l(y,null,C(j.value,o=>(i(),l("div",{key:o.id,class:"bg-slate-800/50 rounded-xl border border-white/10 overflow-hidden"},[e("div",O,[e("div",P,[e("span",G,u(o.icon||"ðŸ“"),1),e("div",null,[e("h3",Q,u(o.name),1),e("span",J,u(o.replies?.length||0)+" respuestas",1)]),o.is_active?c("",!0):(i(),l("span",K," Deshabilitada "))]),e("div",W,[e("button",{onClick:a=>_(o.id),class:"p-2 hover:bg-white/10 rounded-lg text-indigo-400 transition-colors",title:"Agregar respuesta"},[...t[13]||(t[13]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])],8,X),e("button",{onClick:a=>S(o),class:w(["p-2 hover:bg-white/10 rounded-lg transition-colors",o.is_active?"text-green-400":"text-slate-500"]),title:o.is_active?"Deshabilitar":"Habilitar"},[(i(),l("svg",Z,[o.is_active?(i(),l("path",ee)):(i(),l("path",te))]))],10,Y),e("button",{onClick:a=>k(o),class:"p-2 hover:bg-white/10 rounded-lg text-slate-400 transition-colors",title:"Editar"},[...t[14]||(t[14]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,se),e("button",{onClick:a=>B(o),class:"p-2 hover:bg-white/10 rounded-lg text-red-400 transition-colors",title:"Eliminar"},[...t[15]||(t[15]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,oe)])]),o.replies?.length?(i(),l("div",le,[(i(!0),l(y,null,C(o.replies,a=>(i(),l("div",{key:a.id,class:w(["px-6 py-4 flex items-start justify-between hover:bg-white/5 transition-colors",{"opacity-50":!a.is_active}])},[e("div",ie,[e("div",ae,[e("h4",ne,u(a.title),1),a.is_active?c("",!0):(i(),l("span",re," Deshabilitada "))]),e("p",de,u(a.body),1),a.image_path?(i(),l("div",ue,[e("img",{src:`/storage/${a.image_path.replace("public/","")}`,class:"h-16 rounded-lg object-cover",alt:"Preview"},null,8,ce)])):c("",!0)]),e("div",ve,[e("button",{onClick:M=>N(a),class:w(["p-2 hover:bg-white/10 rounded-lg transition-colors",a.is_active?"text-green-400":"text-slate-500"])},[(i(),l("svg",pe,[a.is_active?(i(),l("path",me)):(i(),l("path",xe))]))],10,ge),e("button",{onClick:M=>_(o.id,a),class:"p-2 hover:bg-white/10 rounded-lg text-slate-400 transition-colors"},[...t[16]||(t[16]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,be),e("button",{onClick:M=>D(a),class:"p-2 hover:bg-white/10 rounded-lg text-red-400 transition-colors"},[...t[17]||(t[17]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,he)])],2))),128))])):(i(),l("div",fe,[t[18]||(t[18]=e("p",null,"Sin respuestas en esta categorÃ­a",-1)),e("button",{onClick:a=>_(o.id),class:"mt-2 text-indigo-400 hover:text-indigo-300 text-sm"}," + Agregar respuesta ",8,we)]))]))),128))])),g.value?(i(),l("div",ke,[e("div",_e,[e("h3",ye,u(m.value?"Editar CategorÃ­a":"Nueva CategorÃ­a"),1),e("div",Ce,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Nombre",-1)),b(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>r.value.name=o),type:"text",placeholder:"Ej: Saludos",class:"w-full px-4 py-2 bg-slate-700/50 border border-white/10 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[h,r.value.name]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Icono (emoji)",-1)),e("div",je,[(i(),l(y,null,C(L,o=>e("button",{key:o,onClick:a=>r.value.icon=o,class:w(["w-10 h-10 text-xl rounded-lg hover:bg-white/10 transition-colors",r.value.icon===o?"bg-indigo-600":"bg-slate-700/50"])},u(o),11,Ee)),64))]),b(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>r.value.icon=o),type:"text",placeholder:"O escribe un emoji",class:"w-full px-4 py-2 bg-slate-700/50 border border-white/10 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[h,r.value.icon]])])]),e("div",Me,[e("button",{onClick:t[4]||(t[4]=o=>g.value=!1),class:"px-4 py-2 text-slate-300 hover:text-white transition-colors"}," Cancelar "),e("button",{onClick:R,class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors"}," Guardar ")])])])):c("",!0),p.value?(i(),l("div",ze,[e("div",$e,[e("h3",Le,u(x.value?"Editar Respuesta":"Nueva Respuesta"),1),e("div",Re,[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"TÃ­tulo (nombre corto)",-1)),b(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>n.value.title=o),type:"text",placeholder:"Ej: Saludo inicial",class:"w-full px-4 py-2 bg-slate-700/50 border border-white/10 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[h,n.value.title]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Mensaje",-1)),b(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=o=>n.value.body=o),rows:"5",placeholder:"Escribe el contenido del mensaje...",class:"w-full px-4 py-2 bg-slate-700/50 border border-white/10 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none"},null,512),[[h,n.value.body]]),t[23]||(t[23]=e("p",{class:"text-xs text-slate-400 mt-1"},"Tip: Usa Shift+Enter para saltos de lÃ­nea",-1))]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Imagen (opcional)",-1)),v.value?(i(),l("div",Be,[e("img",{src:v.value,class:"h-32 rounded-lg object-cover",alt:"Preview"},null,8,Se),e("button",{onClick:H,class:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center text-white"},[...t[24]||(t[24]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):c("",!0),e("input",{type:"file",accept:"image/*",onChange:q,class:"w-full text-sm text-slate-400 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-indigo-600 file:text-white hover:file:bg-indigo-700"},null,32)])]),e("div",qe,[e("button",{onClick:t[7]||(t[7]=o=>p.value=!1),class:"px-4 py-2 text-slate-300 hover:text-white transition-colors"}," Cancelar "),e("button",{onClick:V,class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors"}," Guardar ")])])])):c("",!0)]))}});export{Ue as default};
