import{e as U,f as b,g as A,p as S,c as i,a as h,u as r,h as H,w as k,b as t,i as y,k as d,v as u,q as m,o as l,F as M,r as L,d as p,t as n,n as $,l as I,m as C,j as q,s as D}from"./app-b6t0SSt8.js";import{A as P}from"./AdminLayout-mD7M56XG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"flex flex-col sm:flex-row gap-4 mb-6"},F={class:"relative flex-1"},R={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},J={class:"relative p-6"},Q={class:"flex items-start justify-between mb-4"},K={class:"h-14 w-14 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center shadow-lg shadow-purple-500/25"},O={class:"text-2xl font-bold text-white"},W={class:"text-lg font-semibold text-white mb-1 truncate"},X={key:0,class:"text-sm text-slate-400 mb-1 truncate"},Y={class:"text-sm text-slate-500 mb-4 truncate"},Z={class:"flex items-center justify-between pt-4 border-t border-white/10"},ee={class:"flex items-center gap-2 text-sm text-slate-400"},te={class:"flex items-center gap-2"},se=["onClick"],oe={key:1,class:"text-center py-16"},re={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto"},le={class:"relative w-full max-w-2xl bg-slate-900 border border-white/10 rounded-2xl shadow-2xl my-8"},ne={class:"space-y-4"},ie={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ae={class:"md:col-span-2"},de={key:0,class:"mt-1 text-sm text-red-400"},ue={class:"space-y-4 pt-4 border-t border-white/10"},pe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},me={key:0,class:"mt-1 text-sm text-red-400"},xe={key:0,class:"mt-1 text-sm text-red-400"},be={key:0,class:"mt-1 text-sm text-red-400"},ce={key:0,class:"mt-1 text-sm text-red-400"},fe={class:"flex gap-3 pt-4 border-t border-white/10"},ve=["disabled"],we={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},ge={class:"relative w-full max-w-md bg-slate-900 border border-white/10 rounded-2xl shadow-2xl"},he={class:"p-6 text-center"},ke={class:"bg-slate-800/50 rounded-xl p-4 text-left space-y-3 mb-6"},ye={class:"flex items-center justify-between"},Ce={class:"flex items-center gap-2"},je={class:"text-white font-mono"},Ee={class:"flex items-center justify-between"},ze={class:"flex items-center gap-2"},Me={class:"text-green-400 font-mono font-bold"},_e={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Ve={class:"relative w-full max-w-sm bg-slate-900 border border-white/10 rounded-2xl shadow-2xl p-6 text-center"},Be={class:"text-slate-400 mb-6"},Ne={class:"text-white font-medium"},Te={class:"flex gap-3"},Le={__name:"Index",props:{tenants:{type:Array,default:()=>[]}},setup(_){const j=_,V=U(),x=b(!1),c=b(!1),g=b(!1),v=b(null),w=b(""),f=b({email:"",password:""}),o=A({empresa_nombre:"",nit:"",razon_social:"",empresa_telefono:"",direccion:"",admin_nombre:"",admin_apellidos:"",admin_ci:"",admin_email:""}),E=S(()=>{if(!w.value)return j.tenants;const a=w.value.toLowerCase();return j.tenants.filter(e=>e.name.toLowerCase().includes(a)||e.nit?.toLowerCase().includes(a)||e.razon_social?.toLowerCase().includes(a))}),B=()=>{o.post(route("admin.tenants.store"),{onSuccess:a=>{x.value=!1;const e=V.props.flash;e?.generated_password&&(f.value={email:e.admin_email,password:e.generated_password},g.value=!0),o.reset()}})},N=a=>{v.value=a,c.value=!0},T=()=>{D.delete(route("admin.tenants.destroy",v.value.id),{onSuccess:()=>{c.value=!1,v.value=null}})},z=a=>{navigator.clipboard.writeText(a)};return(a,e)=>(l(),i(M,null,[h(r(H),{title:"Gestión de Empresas"}),h(P,null,{header:k(()=>[...e[19]||(e[19]=[t("h1",{class:"text-2xl font-bold text-white"},"Gestión de Empresas",-1)])]),default:k(()=>[t("div",G,[t("div",F,[e[20]||(e[20]=t("svg",{class:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),d(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>w.value=s),type:"text",placeholder:"Buscar por nombre, NIT o razón social...",class:"w-full rounded-xl bg-slate-800/50 border border-white/10 pl-12 pr-4 py-3 text-white placeholder-slate-400 focus:border-purple-500 focus:ring-purple-500 focus:ring-1 transition-colors"},null,512),[[u,w.value]])]),t("button",{onClick:e[1]||(e[1]=s=>x.value=!0),class:"flex items-center justify-center gap-2 px-6 py-3 rounded-xl bg-gradient-to-r from-purple-600 to-pink-600 text-white font-medium hover:from-purple-500 hover:to-pink-500 transition-all shadow-lg shadow-purple-500/25"},[...e[21]||(e[21]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),m(" Nueva Empresa ",-1)])])]),E.value.length?(l(),i("div",R,[(l(!0),i(M,null,L(E.value,s=>(l(),i("div",{key:s.id,class:"group relative overflow-hidden rounded-2xl bg-slate-800/50 border border-white/10 hover:border-purple-500/40 transition-all duration-300"},[e[25]||(e[25]=t("div",{class:"absolute inset-0 bg-gradient-to-br from-purple-600/5 to-pink-600/5 opacity-0 group-hover:opacity-100 transition-opacity"},null,-1)),t("div",J,[t("div",Q,[t("div",K,[t("span",O,n(s.name?.charAt(0)),1)]),t("span",{class:$([s.status==="active"?"bg-green-500/20 text-green-400 border-green-500/30":s.status==="suspended"?"bg-red-500/20 text-red-400 border-red-500/30":"bg-slate-500/20 text-slate-400 border-slate-500/30","px-3 py-1 rounded-full text-xs font-medium border"])},n(s.status==="active"?"Activo":s.status==="suspended"?"Suspendido":"Inactivo"),3)]),t("h3",W,n(s.name),1),s.nit?(l(),i("p",X,"NIT: "+n(s.nit),1)):p("",!0),t("p",Y,n(s.razon_social||"Sin razón social"),1),t("div",Z,[t("div",ee,[e[22]||(e[22]=t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1)),m(" "+n(s.users_count||0)+" usuarios ",1)]),t("div",te,[h(r(I),{href:a.route("admin.tenants.show",s.id),class:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-white/10 transition-colors"},{default:k(()=>[...e[23]||(e[23]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])]),_:1},8,["href"]),t("button",{onClick:Ue=>N(s),class:"p-2 rounded-lg text-slate-400 hover:text-red-400 hover:bg-red-500/10 transition-colors"},[...e[24]||(e[24]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,se)])])])]))),128))])):(l(),i("div",oe,[e[27]||(e[27]=t("div",{class:"mx-auto h-24 w-24 rounded-full bg-slate-800/50 border border-white/10 flex items-center justify-center mb-6"},[t("svg",{class:"h-12 w-12 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),e[28]||(e[28]=t("h3",{class:"text-xl font-semibold text-white mb-2"},"No hay empresas registradas",-1)),e[29]||(e[29]=t("p",{class:"text-slate-400 mb-6"},"Comienza agregando tu primera empresa cliente",-1)),t("button",{onClick:e[2]||(e[2]=s=>x.value=!0),class:"inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-gradient-to-r from-purple-600 to-pink-600 text-white font-medium hover:from-purple-500 hover:to-pink-500 transition-all"},[...e[26]||(e[26]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),m(" Agregar Empresa ",-1)])])])),(l(),y(C,{to:"body"},[x.value?(l(),i("div",re,[t("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e[3]||(e[3]=s=>x.value=!1)}),t("div",le,[e[42]||(e[42]=t("div",{class:"p-6 border-b border-white/10"},[t("h3",{class:"text-xl font-semibold text-white"},"Nueva Empresa"),t("p",{class:"text-sm text-slate-400 mt-1"},"Registra una nueva empresa y su administrador")],-1)),t("form",{onSubmit:q(B,["prevent"]),class:"p-6 space-y-6 max-h-[70vh] overflow-y-auto"},[t("div",ne,[e[35]||(e[35]=t("h4",{class:"text-sm font-medium text-purple-400 uppercase tracking-wider flex items-center gap-2"},[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})]),m(" Datos de la Empresa ")],-1)),t("div",ie,[t("div",ae,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Nombre de la Empresa *",-1)),d(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>r(o).empresa_nombre=s),type:"text",required:"",placeholder:"Ej: Universidad UNITEPC",class:"w-full rounded-xl bg-slate-800/50 border border-white/10 px-4 py-3 text-white placeholder-slate-500 focus:border-purple-500 focus:ring-purple-500 focus:ring-1"},null,512),[[u,r(o).empresa_nombre]]),r(o).errors.empresa_nombre?(l(),i("p",de,n(r(o).errors.empresa_nombre),1)):p("",!0)]),t("div",null,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"NIT",-1)),d(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>r(o).nit=s),type:"text",placeholder:"Ej: 123456789",class:"w-full rounded-xl bg-slate-800/50 border border-white/10 px-4 py-3 text-white placeholder-slate-500 focus:border-purple-500 focus:ring-purple-500 focus:ring-1"},null,512),[[u,r(o).nit]])]),t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Razón Social",-1)),d(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>r(o).razon_social=s),type:"text",placeholder:"Ej: UNITEPC S.A.",class:"w-full rounded-xl bg-slate-800/50 border border-white/10 px-4 py-3 text-white placeholder-slate-500 focus:border-purple-500 focus:ring-purple-500 focus:ring-1"},null,512),[[u,r(o).razon_social]])]),t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Teléfono de la Empresa",-1)),d(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>r(o).empresa_telefono=s),type:"text",placeholder:"Ej: +591 70000000",class:"w-full rounded-xl bg-slate-800/50 border border-white/10 px-4 py-3 text-white placeholder-slate-500 focus:border-purple-500 focus:ring-purple-500 focus:ring-1"},null,512),[[u,r(o).empresa_telefono]])]),t("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Dirección",-1)),d(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>r(o).direccion=s),type:"text",placeholder:"Ej: Av. Principal #123",class:"w-full rounded-xl bg-slate-800/50 border border-white/10 px-4 py-3 text-white placeholder-slate-500 focus:border-purple-500 focus:ring-purple-500 focus:ring-1"},null,512),[[u,r(o).direccion]])])])]),t("div",ue,[e[40]||(e[40]=t("h4",{class:"text-sm font-medium text-green-400 uppercase tracking-wider flex items-center gap-2"},[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),m(" Administrador de la Empresa ")],-1)),e[41]||(e[41]=t("p",{class:"text-xs text-slate-500"},"Este usuario será el administrador principal de la empresa. Se generará una contraseña automática.",-1)),t("div",pe,[t("div",null,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Nombre *",-1)),d(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>r(o).admin_nombre=s),type:"text",required:"",placeholder:"Ej: Juan",class:"w-full rounded-xl bg-slate-800/50 border border-white/10 px-4 py-3 text-white placeholder-slate-500 focus:border-purple-500 focus:ring-purple-500 focus:ring-1"},null,512),[[u,r(o).admin_nombre]]),r(o).errors.admin_nombre?(l(),i("p",me,n(r(o).errors.admin_nombre),1)):p("",!0)]),t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Apellidos *",-1)),d(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>r(o).admin_apellidos=s),type:"text",required:"",placeholder:"Ej: Pérez García",class:"w-full rounded-xl bg-slate-800/50 border border-white/10 px-4 py-3 text-white placeholder-slate-500 focus:border-purple-500 focus:ring-purple-500 focus:ring-1"},null,512),[[u,r(o).admin_apellidos]]),r(o).errors.admin_apellidos?(l(),i("p",xe,n(r(o).errors.admin_apellidos),1)):p("",!0)]),t("div",null,[e[38]||(e[38]=t("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"CI (Carnet de Identidad) *",-1)),d(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>r(o).admin_ci=s),type:"text",required:"",placeholder:"Ej: 12345678",class:"w-full rounded-xl bg-slate-800/50 border border-white/10 px-4 py-3 text-white placeholder-slate-500 focus:border-purple-500 focus:ring-purple-500 focus:ring-1"},null,512),[[u,r(o).admin_ci]]),r(o).errors.admin_ci?(l(),i("p",be,n(r(o).errors.admin_ci),1)):p("",!0)]),t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Correo Electrónico *",-1)),d(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>r(o).admin_email=s),type:"email",required:"",placeholder:"Ej: admin@empresa.com",class:"w-full rounded-xl bg-slate-800/50 border border-white/10 px-4 py-3 text-white placeholder-slate-500 focus:border-purple-500 focus:ring-purple-500 focus:ring-1"},null,512),[[u,r(o).admin_email]]),r(o).errors.admin_email?(l(),i("p",ce,n(r(o).errors.admin_email),1)):p("",!0)])])]),t("div",fe,[t("button",{type:"button",onClick:e[13]||(e[13]=s=>x.value=!1),class:"flex-1 px-4 py-3 rounded-xl border border-white/10 text-slate-300 hover:bg-white/5 transition-colors"}," Cancelar "),t("button",{type:"submit",disabled:r(o).processing,class:"flex-1 px-4 py-3 rounded-xl bg-gradient-to-r from-purple-600 to-pink-600 text-white font-medium hover:from-purple-500 hover:to-pink-500 disabled:opacity-50 transition-all"},n(r(o).processing?"Creando...":"Crear Empresa"),9,ve)])],32)])])):p("",!0)])),(l(),y(C,{to:"body"},[g.value?(l(),i("div",we,[e[51]||(e[51]=t("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm"},null,-1)),t("div",ge,[t("div",he,[e[47]||(e[47]=t("div",{class:"mx-auto h-16 w-16 rounded-full bg-green-500/20 flex items-center justify-center mb-4"},[t("svg",{class:"h-8 w-8 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),e[48]||(e[48]=t("h3",{class:"text-xl font-semibold text-white mb-2"},"¡Empresa Creada!",-1)),e[49]||(e[49]=t("p",{class:"text-slate-400 mb-6"},"Guarda estas credenciales para el administrador:",-1)),t("div",ke,[t("div",ye,[e[44]||(e[44]=t("span",{class:"text-sm text-slate-400"},"Correo:",-1)),t("div",Ce,[t("span",je,n(f.value.email),1),t("button",{onClick:e[14]||(e[14]=s=>z(f.value.email)),class:"p-1 hover:bg-white/10 rounded"},[...e[43]||(e[43]=[t("svg",{class:"h-4 w-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)])])])]),t("div",Ee,[e[46]||(e[46]=t("span",{class:"text-sm text-slate-400"},"Contraseña:",-1)),t("div",ze,[t("span",Me,n(f.value.password),1),t("button",{onClick:e[15]||(e[15]=s=>z(f.value.password)),class:"p-1 hover:bg-white/10 rounded"},[...e[45]||(e[45]=[t("svg",{class:"h-4 w-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)])])])])]),e[50]||(e[50]=t("p",{class:"text-xs text-orange-400 mb-6"}," ⚠️ Asegúrate de copiar la contraseña. Solo se mostrará una vez. ",-1)),t("button",{onClick:e[16]||(e[16]=s=>g.value=!1),class:"w-full px-4 py-3 rounded-xl bg-gradient-to-r from-purple-600 to-pink-600 text-white font-medium hover:from-purple-500 hover:to-pink-500 transition-all"}," Entendido ")])])])):p("",!0)])),(l(),y(C,{to:"body"},[c.value?(l(),i("div",_e,[t("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e[17]||(e[17]=s=>c.value=!1)}),t("div",Ve,[e[54]||(e[54]=t("div",{class:"mx-auto h-16 w-16 rounded-full bg-red-500/20 flex items-center justify-center mb-4"},[t("svg",{class:"h-8 w-8 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),e[55]||(e[55]=t("h3",{class:"text-xl font-semibold text-white mb-2"},"¿Eliminar empresa?",-1)),t("p",Be,[e[52]||(e[52]=m("Esta acción eliminará ",-1)),t("span",Ne,n(v.value?.name),1),e[53]||(e[53]=m(" y todos sus datos asociados.",-1))]),t("div",Te,[t("button",{onClick:e[18]||(e[18]=s=>c.value=!1),class:"flex-1 px-4 py-3 rounded-xl border border-white/10 text-slate-300 hover:bg-white/5 transition-colors"}," Cancelar "),t("button",{onClick:T,class:"flex-1 px-4 py-3 rounded-xl bg-red-600 text-white font-medium hover:bg-red-500 transition-colors"}," Eliminar ")])])])):p("",!0)]))]),_:1})],64))}};export{Le as default};
