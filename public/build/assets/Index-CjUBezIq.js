import{e as Ee,p as L,f as d,E as ae,G as f,B as Fe,H as Ne,c as n,a as Z,b as s,d as c,u as W,h as Ae,t as r,w as re,l as ie,q as de,k as _,v as T,F as g,r as F,n as x,I as q,y as Oe,x as Pe,J as Re,s as He,o as l,j as Ke}from"./app-q6uuFM-w.js";import{_ as Se}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ze={class:"h-screen flex bg-gradient-to-br from-slate-900 via-indigo-900 to-slate-900"},We={class:"hidden lg:flex w-16 flex-col bg-slate-900/80 border-r border-white/10"},qe={class:"h-16 flex items-center justify-center border-b border-white/10"},Je={class:"h-10 w-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center"},Ye={class:"text-lg font-bold text-white"},Ge={class:"flex-1 py-4 space-y-2"},Qe={class:"p-3 border-t border-white/10"},Xe={class:"text-sm font-bold text-white"},et={key:0,class:"absolute bottom-16 left-2 w-48 rounded-lg bg-slate-800 border border-white/10 shadow-xl overflow-hidden z-50"},tt={class:"w-80 bg-slate-800/50 border-r border-white/10 flex flex-col backdrop-blur-xl"},st={class:"p-4 border-b border-white/10"},ot={class:"flex items-center justify-between mb-3"},nt={class:"flex items-center gap-2"},lt={key:0,class:"bg-indigo-500 text-white px-2 py-0.5 rounded-full text-xs font-bold"},at={class:"relative"},rt={class:"flex-1 overflow-y-auto"},it={key:0,class:"p-6 text-center text-slate-400"},dt=["onClick"],ut={class:"ml-3 flex-1 min-w-0"},ct={class:"flex justify-between items-center mb-1"},vt={class:"font-semibold text-white truncate"},pt={class:"text-xs text-slate-400 whitespace-nowrap ml-2"},ht={class:"text-sm text-slate-400 truncate"},ft={key:0,class:"ml-2 bg-indigo-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center"},gt={key:0,class:"flex-1 flex flex-col min-h-0"},mt={class:"px-5 py-3 bg-slate-800/80 border-b border-white/10 flex items-center justify-between shrink-0 backdrop-blur-xl"},xt={class:"flex items-center"},wt={class:"ml-3"},bt={class:"font-semibold text-white"},yt={key:0,class:"flex justify-center my-4"},kt={class:"bg-slate-700/80 text-slate-300 text-xs font-medium px-4 py-1.5 rounded-full"},_t=["src","onClick"],Ct={key:0,class:"text-sm text-white mt-2"},Dt={class:"flex items-start gap-3 min-w-[220px] p-2 bg-slate-600/50 rounded-lg"},jt={class:"text-white text-xs font-bold"},Mt={class:"flex-1 min-w-0"},It={class:"text-sm font-medium text-white truncate"},Lt={class:"text-xs text-slate-300 mt-0.5"},Tt={class:"flex gap-4 mt-2 text-sm"},Bt=["onClick"],Ut=["href","download"],zt={key:2,class:"text-sm text-white break-words"},Vt={class:"flex items-center justify-end gap-1 mt-1"},$t={class:"text-[10px] text-white/60"},Et={key:0,class:"w-4 h-4 text-white/60",fill:"currentColor",viewBox:"0 0 24 24"},Ft={key:0,class:"absolute inset-0 bg-indigo-500/20 border-4 border-dashed border-indigo-500 rounded-lg flex items-center justify-center z-50"},Nt={class:"px-4 py-3 bg-slate-800/80 border-t border-white/10 flex items-center gap-3 backdrop-blur-xl"},At=["disabled"],Ot={key:1,class:"flex-1 flex flex-col items-center justify-center text-slate-400"},Pt={key:0,class:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4"},Rt={class:"bg-slate-900 border border-white/10 rounded-xl max-w-lg w-full max-h-[90vh] flex flex-col overflow-hidden shadow-2xl"},Ht={class:"flex items-center justify-between p-4 border-b border-white/10"},Kt={class:"flex items-center gap-3"},St={class:"text-white font-medium"},Zt={class:"flex-1 overflow-y-auto p-4 bg-slate-800/50"},Wt={key:0,class:"flex items-center justify-center min-h-[200px]"},qt=["src"],Jt={key:1,class:"text-center"},Yt={class:"text-white font-medium"},Gt={class:"text-slate-400 text-sm"},Qt={key:1,class:"flex gap-2 mt-4 justify-center flex-wrap"},Xt=["onClick"],es=["src"],ts={key:1,class:"w-16 h-16 bg-slate-700 flex items-center justify-center"},ss=["onClick"],os={class:"p-4 bg-slate-800 border-t border-white/10"},ns={class:"flex items-center gap-3"},ls=["disabled"],as={key:1,class:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4"},rs={class:"bg-slate-900 border border-white/10 rounded-xl max-w-sm w-full shadow-2xl overflow-hidden"},is={class:"p-4 bg-indigo-600 flex justify-between items-center"},ds={class:"p-6 space-y-4"},us={class:"relative"},cs=["value"],vs=["disabled"],ps={key:0,class:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"},hs={__name:"Index",props:{initialContacts:Array},setup(ue){const ce=ue,J=Ee(),ve=L(()=>J.props.auth.user),pe=L(()=>J.props.auth?.user?.tenant||{});d(!1);const C=d(!1),he=()=>{He.post(route("logout"))},v=d(ce.initialContacts),u=d(null),h=d([]),B=d(null),U=d(""),fe=d(null),ge=d(null),z=d(!1),D=d(!1),N=d("591"),w=d(""),V=d(""),j=d([]),M=d(!1);ae(D,t=>{t&&j.value.length===0&&me()});const me=async()=>{try{const t=await f.get("/debug-templates");t.data&&t.data.data&&(j.value=t.data.data.filter(e=>e.status==="APPROVED").map(e=>({name:e.name,language:e.language})),j.value.length>0&&(V.value=j.value[0].name))}catch(t){console.error("Error fetching templates",t)}},Y=L(()=>v.value.reduce((t,e)=>t+(e.unread||0),0)),G=async()=>{if(w.value){M.value=!0;try{const t=N.value+w.value,o=(await f.post(route("chat.initiate"),{phone:t,template:V.value})).data,a=v.value.findIndex(m=>m.id===o.id);a===-1?(v.value.unshift({...o,relativeDate:O(o.time,!0),formattedTime:I(o.time)}),P(v.value[0])):P(v.value[a]),D.value=!1,w.value=""}catch(t){console.error("Error initiating chat",t),alert("Error al iniciar chat")}finally{M.value=!1}}},$=d(!1),i=d([]),b=d(""),p=d(0);let A=null;const xe=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],we=["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],I=t=>{if(!t)return"";let e;return t.includes("T")&&(t.includes("+")||t.includes("Z"))?e=new Date(t):e=new Date(t.replace(" ","T")+"Z"),isNaN(e.getTime())?t:e.toLocaleTimeString("es-BO",{hour:"2-digit",minute:"2-digit"})},O=(t,e=!1)=>{if(!t)return"";let o;if(t.includes("T")&&(t.includes("+")||t.includes("Z"))?o=new Date(t):o=new Date(t.replace(" ","T")+"Z"),isNaN(o.getTime()))return t;const a=new Date,m=new Date(a.getFullYear(),a.getMonth(),a.getDate()),S=new Date(o.getFullYear(),o.getMonth(),o.getDate()),E=Math.floor((m-S)/(1e3*60*60*24));return E===0?e?I(t):"Hoy":E===1?"Ayer":E===2?"Anteayer":E<7?xe[o.getDay()]:`${o.getDate()} ${we[o.getMonth()]}`},be=t=>{if(!t)return"";let e;return t.includes("T")&&(t.includes("+")||t.includes("Z"))?e=new Date(t):e=new Date(t.replace(" ","T")+"Z"),`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`},Q=L(()=>{if(!U.value.trim())return v.value;const t=U.value.toLowerCase();return v.value.filter(e=>e.name&&e.name.toLowerCase().includes(t)||e.lastMessage&&e.lastMessage.toLowerCase().includes(t))}),ye=L(()=>{const t=[];let e=null;return h.value.forEach(o=>{const a=be(o.rawDate);a!==e&&(t.push({type:"separator",date:O(o.rawDate),key:"sep-"+a}),e=a),t.push({type:"message",...o})}),t}),ke=async()=>{await Re(),setTimeout(()=>{B.value&&(B.value.scrollTop=B.value.scrollHeight)},100)};ae(h,()=>{ke()},{deep:!0});const P=async t=>{if(u.value=t,h.value=[],await X(),t.unread>0)try{await f.post(route("chat.read",t.id));const e=v.value.findIndex(o=>o.id===t.id);e!==-1&&(v.value[e].unread=0)}catch(e){console.error("Error marking as read",e)}},X=async()=>{if(u.value)try{const e=(await f.get(route("chat.messages",u.value.id))).data.map(o=>({id:o.id,text:o.body,sender:o.direction==="outgoing"?"me":"them",time:I(o.created_at),rawDate:o.created_at,msgType:o.type,metadata:o.metadata?JSON.parse(o.metadata):null}));e.length!==h.value.length&&(h.value=e)}catch(t){console.error("Error loading messages",t)}},_e=async()=>{try{const t=await f.get(route("chat.contacts"));v.value=t.data.map(e=>({...e,relativeDate:O(e.time,!0),formattedTime:I(e.time)}))}catch(t){console.error("Error fetching contacts",t)}},y=d(""),k=d(!1),ee=async()=>{if(!y.value.trim()||!u.value)return;const t=y.value;y.value="",k.value=!0;const e=new Date().toISOString(),o=Date.now();h.value.push({id:o,text:t,sender:"me",time:I(e),rawDate:e});try{await f.post(route("chat.send",u.value.id),{message:t})}catch(a){console.error("Failed to send",a),alert("Error al enviar mensaje")}finally{k.value=!1}},te=t=>{if(!t)return"?";const e=t.split(" ");return e.length>=2?(e[0][0]+e[1][0]).toUpperCase():t.substring(0,2).toUpperCase()},se=t=>{if(!t)return"bg-slate-500";const e=["bg-indigo-500","bg-purple-500","bg-pink-500","bg-rose-500","bg-orange-500","bg-teal-500","bg-cyan-500","bg-emerald-500"],o=t.charCodeAt(0)%e.length;return e[o]},Ce=t=>{window.open(t,"_blank")},R=t=>{if(t.metadata?.filename)return t.metadata.filename;if(t.text&&!t.text.includes("/"))return t.text;if(t.text?.includes("/")){const e=t.text.split("/");return e[e.length-1]||"Documento"}return"Documento"},H=t=>R(t).split(".").pop()?.toUpperCase()||"Archivo",oe=t=>t.metadata?.local_url?t.metadata.local_url:t.text?.startsWith("http")?t.text:`/storage/chat-media/${t.text}`,De=t=>{const e=H(t).toLowerCase();return{pdf:"bg-red-500",doc:"bg-blue-600",docx:"bg-blue-600",xls:"bg-green-600",xlsx:"bg-green-600",txt:"bg-gray-500"}[e]||"bg-slate-500"},je=t=>{const e=H(t).toUpperCase();return e.length>4?e.substring(0,4):e},Me=t=>{const e=oe(t);window.open(e,"_blank")},Ie=async(t,e="")=>{const o=new FormData;o.append("image",t),e&&o.append("caption",e);const a=Date.now()+Math.random(),m=URL.createObjectURL(t);h.value.push({id:a,text:m,sender:"me",time:new Date().toLocaleTimeString("es-BO",{hour:"2-digit",minute:"2-digit"}),rawDate:new Date().toISOString(),msgType:"image",metadata:e?{caption:e}:null});try{await f.post(route("chat.sendImage",u.value.id),o,{headers:{"Content-Type":"multipart/form-data"}})}catch(S){console.error("Failed to send image",S)}},Le=async t=>{const e=new FormData;e.append("document",t),e.append("filename",t.name);const o=Date.now()+Math.random();h.value.push({id:o,text:t.name,sender:"me",time:new Date().toLocaleTimeString("es-BO",{hour:"2-digit",minute:"2-digit"}),rawDate:new Date().toISOString(),msgType:"document"});try{await f.post(route("chat.sendDocument",u.value.id),e,{headers:{"Content-Type":"multipart/form-data"}})}catch(a){console.error("Failed to send document",a)}},Te=t=>{const e=Array.from(t.target.files);!e.length||!u.value||(K(e),t.target.value="")},Be=t=>{const e=Array.from(t.target.files);!e.length||!u.value||(K(e),t.target.value="")},K=t=>{i.value=t.map(e=>({file:e,name:e.name,type:e.type,isImage:e.type.startsWith("image/"),preview:e.type.startsWith("image/")?URL.createObjectURL(e):null,size:(e.size/1024).toFixed(1)+" KB"})),p.value=0,b.value="",$.value=!0},ne=()=>{i.value.forEach(t=>{t.preview&&URL.revokeObjectURL(t.preview)}),i.value=[],b.value="",$.value=!1},Ue=t=>{i.value[t].preview&&URL.revokeObjectURL(i.value[t].preview),i.value.splice(t,1),i.value.length===0?ne():p.value>=i.value.length&&(p.value=i.value.length-1)},le=async()=>{if(!i.value.length||!u.value)return;$.value=!1,k.value=!0;const t=b.value;for(const e of i.value)e.isImage?await Ie(e.file,t):await Le(e.file);i.value.forEach(e=>{e.preview&&URL.revokeObjectURL(e.preview)}),i.value=[],b.value="",k.value=!1},ze=t=>{t.preventDefault(),z.value=!0},Ve=()=>{z.value=!1},$e=t=>{if(t.preventDefault(),z.value=!1,!u.value)return;const e=Array.from(t.dataTransfer.files);e.length&&K(e)};return Fe(()=>{A=setInterval(()=>{_e(),u.value&&X()},5e3)}),Ne(()=>{A&&clearInterval(A)}),(t,e)=>(l(),n(g,null,[Z(W(Ae),{title:"Chat WhatsApp"}),s("div",Ze,[s("div",We,[s("div",qe,[s("div",Je,[s("span",Ye,r(pe.value?.name?.charAt(0)||"C"),1)])]),s("nav",Ge,[Z(W(ie),{href:t.route("tenant.dashboard"),class:"flex items-center justify-center p-3 mx-2 rounded-xl text-slate-400 hover:bg-white/10 hover:text-white transition-colors",title:"Dashboard"},{default:re(()=>[...e[12]||(e[12]=[s("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)])]),_:1},8,["href"]),e[13]||(e[13]=s("div",{class:"flex items-center justify-center p-3 mx-2 rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg"},[s("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])],-1))]),s("div",Qe,[s("button",{onClick:e[0]||(e[0]=o=>C.value=!C.value),class:"relative w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center mx-auto"},[s("span",Xe,r(ve.value?.name?.charAt(0)||"U"),1)]),C.value?(l(),n("div",et,[Z(W(ie),{href:t.route("tenant.settings"),class:"flex items-center gap-2 px-4 py-2.5 text-sm text-slate-300 hover:bg-white/10"},{default:re(()=>[...e[14]||(e[14]=[de(" Configuración",-1)])]),_:1},8,["href"]),s("button",{onClick:he,class:"flex w-full items-center gap-2 px-4 py-2.5 text-sm text-red-400 hover:bg-red-500/10"},"Cerrar Sesión")])):c("",!0)])]),s("div",tt,[s("div",st,[s("div",ot,[s("div",nt,[e[15]||(e[15]=s("h2",{class:"text-white font-semibold text-lg"},"Conversaciones",-1)),Y.value>0?(l(),n("span",lt,r(Y.value),1)):c("",!0)]),s("button",{onClick:e[1]||(e[1]=o=>D.value=!0),class:"p-2 bg-indigo-500/20 hover:bg-indigo-500/30 rounded-lg text-indigo-400 transition-colors",title:"Nuevo Chat"},[...e[16]||(e[16]=[s("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])]),s("div",at,[e[17]||(e[17]=s("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),_(s("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>U.value=o),type:"text",placeholder:"Buscar chat...",class:"w-full pl-10 pr-4 py-2.5 rounded-xl bg-slate-700/50 border border-white/10 text-white text-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},null,512),[[T,U.value]])])]),s("div",rt,[Q.value.length===0?(l(),n("div",it,[...e[18]||(e[18]=[s("svg",{class:"w-12 h-12 mx-auto mb-2 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1),s("p",{class:"text-sm"},"No hay conversaciones",-1)])])):c("",!0),(l(!0),n(g,null,F(Q.value,o=>(l(),n("div",{key:o.id,onClick:a=>P(o),class:x(["flex items-center p-4 cursor-pointer border-b border-white/5 transition-all duration-200 hover:bg-white/5",{"bg-indigo-500/20 border-l-4 border-l-indigo-500":u.value&&u.value.id===o.id}])},[s("div",{class:x([se(o.name),"w-12 h-12 rounded-full flex items-center justify-center text-white font-semibold text-sm shadow-md"])},r(te(o.name)),3),s("div",ut,[s("div",ct,[s("h3",vt,r(o.name),1),s("span",pt,r(o.relativeDate||o.formattedTime),1)]),s("p",ht,r(o.lastMessage||"Sin mensajes"),1)]),o.unread>0?(l(),n("div",ft,r(o.unread),1)):c("",!0)],10,dt))),128))])]),s("div",{class:"flex-1 flex flex-col bg-slate-900/50 min-h-0 relative",onDragover:ze,onDragleave:Ve,onDrop:$e},[u.value?(l(),n("div",gt,[s("div",mt,[s("div",xt,[s("div",{class:x([se(u.value.name),"w-11 h-11 rounded-full flex items-center justify-center text-white font-semibold shadow-md"])},r(te(u.value.name)),3),s("div",wt,[s("h3",bt,r(u.value.name),1),e[19]||(e[19]=s("p",{class:"text-xs text-green-400"},"En línea",-1))])])]),s("div",{ref_key:"messageContainer",ref:B,class:"flex-1 overflow-y-auto px-6 py-4 min-h-0"},[(l(!0),n(g,null,F(ye.value,o=>(l(),n(g,{key:o.key||o.id},[o.type==="separator"?(l(),n("div",yt,[s("span",kt,r(o.date),1)])):(l(),n("div",{key:1,class:x(["flex mb-2",o.sender==="me"?"justify-end":"justify-start"])},[s("div",{class:x(["max-w-[70%] px-3 py-2 rounded-xl shadow-sm relative",o.sender==="me"?"bg-indigo-600 rounded-br-sm":"bg-slate-700 rounded-bl-sm"])},[o.msgType==="image"?(l(),n(g,{key:0},[s("img",{src:o.text,alt:"Imagen",class:"max-w-[280px] max-h-[300px] rounded-lg cursor-pointer hover:opacity-90 object-cover",onClick:a=>Ce(o.text)},null,8,_t),o.metadata?.caption?(l(),n("p",Ct,r(o.metadata.caption),1)):c("",!0)],64)):o.msgType==="document"?(l(),n(g,{key:1},[s("div",Dt,[s("div",{class:x(["flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center",De(o)])},[s("span",jt,r(je(o)),1)],2),s("div",Mt,[s("p",It,r(R(o)),1),s("p",Lt,r(H(o)),1)])]),s("div",Tt,[s("button",{onClick:a=>Me(o),class:"text-indigo-300 hover:text-indigo-200 font-medium"},"Abrir",8,Bt),s("a",{href:oe(o),download:R(o),class:"text-indigo-300 hover:text-indigo-200 font-medium"},"Descargar",8,Ut)])],64)):(l(),n("p",zt,r(o.text),1)),s("div",Vt,[s("span",$t,r(o.time),1),o.sender==="me"?(l(),n("svg",Et,[...e[20]||(e[20]=[s("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"},null,-1)])])):c("",!0)])],2)],2))],64))),128))],512),z.value?(l(),n("div",Ft,[...e[21]||(e[21]=[s("div",{class:"text-center"},[s("svg",{class:"w-16 h-16 mx-auto text-indigo-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})]),s("p",{class:"text-lg font-semibold text-indigo-300"},"Suelta tus archivos aquí")],-1)])])):c("",!0),s("div",Nt,[s("input",{type:"file",ref_key:"imageInput",ref:fe,accept:"image/*",multiple:"",class:"hidden",onChange:Te},null,544),s("input",{type:"file",ref_key:"documentInput",ref:ge,multiple:"",class:"hidden",onChange:Be},null,544),s("button",{onClick:e[3]||(e[3]=o=>t.$refs.imageInput.click()),class:"p-2 rounded-lg hover:bg-white/10 text-slate-400 transition-colors",title:"Enviar imagen"},[...e[22]||(e[22]=[s("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])]),s("button",{onClick:e[4]||(e[4]=o=>t.$refs.documentInput.click()),class:"p-2 rounded-lg hover:bg-white/10 text-slate-400 transition-colors",title:"Enviar documento"},[...e[23]||(e[23]=[s("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1)])]),_(s("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>y.value=o),onKeyup:q(ee,["enter"]),type:"text",placeholder:"Escribe un mensaje",class:"flex-1 px-5 py-3 rounded-xl bg-slate-700/50 border border-white/10 text-white text-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,544),[[T,y.value]]),s("button",{onClick:ee,disabled:k.value||!y.value.trim(),class:"p-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-lg"},[...e[24]||(e[24]=[s("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)])],8,At)])])):(l(),n("div",Ot,[...e[25]||(e[25]=[Oe('<div class="w-24 h-24 bg-slate-700/50 rounded-full flex items-center justify-center mb-4" data-v-b8969d69><svg class="w-12 h-12 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-b8969d69><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" data-v-b8969d69></path></svg></div><h3 class="text-xl font-medium text-white mb-2" data-v-b8969d69>Chat WhatsApp</h3><p class="text-sm" data-v-b8969d69>Selecciona un chat para comenzar</p>',3)])]))],32),C.value?(l(),n("div",{key:0,onClick:e[6]||(e[6]=o=>C.value=!1),class:"fixed inset-0 z-40"})):c("",!0)]),$.value?(l(),n("div",Pt,[s("div",Rt,[s("div",Ht,[s("div",Kt,[s("button",{onClick:ne,class:"p-2 hover:bg-white/10 rounded-full transition-colors"},[...e[26]||(e[26]=[s("svg",{class:"w-5 h-5 text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),s("span",St,r(i.value.length)+" archivo"+r(i.value.length>1?"s":""),1)])]),s("div",Zt,[i.value[p.value]?(l(),n("div",Wt,[i.value[p.value].isImage?(l(),n("img",{key:0,src:i.value[p.value].preview,class:"max-w-full max-h-[300px] rounded-lg object-contain"},null,8,qt)):(l(),n("div",Jt,[e[27]||(e[27]=s("svg",{class:"w-20 h-20 mx-auto text-slate-500 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),s("p",Yt,r(i.value[p.value].name),1),s("p",Gt,r(i.value[p.value].size),1)]))])):c("",!0),i.value.length>1?(l(),n("div",Qt,[(l(!0),n(g,null,F(i.value,(o,a)=>(l(),n("div",{key:a,class:x(["relative cursor-pointer rounded-lg overflow-hidden border-2 transition-all",p.value===a?"border-indigo-500":"border-transparent"]),onClick:m=>p.value=a},[o.isImage?(l(),n("img",{key:0,src:o.preview,class:"w-16 h-16 object-cover"},null,8,es)):(l(),n("div",ts,[...e[28]||(e[28]=[s("svg",{class:"w-8 h-8 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])])),s("button",{onClick:Ke(m=>Ue(a),["stop"]),class:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center shadow-lg"},[...e[29]||(e[29]=[s("svg",{class:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,ss)],10,Xt))),128))])):c("",!0)]),s("div",os,[s("div",ns,[_(s("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>b.value=o),type:"text",placeholder:"Agregar un comentario...",class:"flex-1 bg-slate-700/50 text-white px-4 py-3 rounded-xl border border-white/10 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 placeholder-slate-400",onKeyup:q(le,["enter"])},null,544),[[T,b.value]]),s("button",{onClick:le,disabled:k.value,class:"p-3 bg-indigo-500 hover:bg-indigo-600 rounded-xl transition-colors disabled:opacity-50"},[...e[30]||(e[30]=[s("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)])],8,ls)])])])])):c("",!0),D.value?(l(),n("div",as,[s("div",rs,[s("div",is,[e[32]||(e[32]=s("h3",{class:"text-white font-semibold text-lg"},"Iniciar Conversación",-1)),s("button",{onClick:e[8]||(e[8]=o=>D.value=!1),class:"text-white/80 hover:text-white transition-colors"},[...e[31]||(e[31]=[s("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s("div",ds,[s("div",null,[e[34]||(e[34]=s("label",{class:"block text-sm font-medium text-slate-300 mb-1"},"Prefijo País",-1)),s("div",us,[e[33]||(e[33]=s("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 font-medium"},"+",-1)),_(s("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>N.value=o),type:"text",class:"w-full pl-6 pr-4 py-2 rounded-lg bg-slate-700/50 border border-white/10 text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all outline-none",placeholder:"591"},null,512),[[T,N.value]])])]),s("div",null,[e[35]||(e[35]=s("label",{class:"block text-sm font-medium text-slate-300 mb-1"},"Número de Teléfono",-1)),_(s("input",{"onUpdate:modelValue":e[10]||(e[10]=o=>w.value=o),type:"tel",class:"w-full px-4 py-2 rounded-lg bg-slate-700/50 border border-white/10 text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all outline-none",placeholder:"70012345",onKeyup:q(G,["enter"])},null,544),[[T,w.value]])]),s("div",null,[e[37]||(e[37]=s("label",{class:"block text-sm font-medium text-slate-300 mb-1"},"Plantilla de Inicio (Opcional)",-1)),_(s("select",{"onUpdate:modelValue":e[11]||(e[11]=o=>V.value=o),class:"w-full px-4 py-2 rounded-lg bg-slate-700/50 border border-white/10 text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all outline-none text-sm"},[e[36]||(e[36]=s("option",{value:""},"-- Ninguna --",-1)),(l(!0),n(g,null,F(j.value,o=>(l(),n("option",{key:o.name,value:o.name},r(o.name)+" ("+r(o.language)+") ",9,cs))),128))],512),[[Pe,V.value]]),e[38]||(e[38]=s("p",{class:"text-xs text-slate-400 mt-1"},"Si el contacto no te ha escrito en 24h, usa una plantilla. ",-1))]),s("button",{onClick:G,disabled:M.value||!w.value,class:"w-full py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[M.value?(l(),n("span",ps)):c("",!0),de(" "+r(M.value?"Iniciando...":"Iniciar Chat"),1)],8,vs)])])])):c("",!0)],64))}},ms=Se(hs,[["__scopeId","data-v-b8969d69"]]);export{ms as default};
