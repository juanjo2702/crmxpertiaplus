import{e as $,f as x,g as T,c as i,a as C,u as l,h as A,w as j,b as e,i as g,q as w,o as r,F as M,r as N,t as n,n as q,m as h,d as c,j as S,k as m,v as b,s as _}from"./app-Cvu-qKWX.js";import{T as H}from"./TenantLayout-5NQ8iohk.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"flex flex-col sm:flex-row gap-4 mb-6"},D={class:"rounded-2xl bg-slate-800/50 border border-white/10 overflow-hidden"},E={key:0,class:"overflow-x-auto"},F={class:"w-full"},G={class:"divide-y divide-white/5"},R={class:"px-6 py-4"},I={class:"flex items-center gap-3"},P={class:"h-10 w-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center"},J={class:"text-sm font-bold text-white"},K={class:"font-medium text-white"},O={class:"text-sm text-slate-400"},Q={class:"px-6 py-4 text-slate-300"},W={class:"px-6 py-4"},X={class:"px-6 py-4 text-right"},Y=["onClick"],Z={key:1,class:"text-xs text-slate-500"},ee={key:1,class:"text-center py-16"},te={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},se={class:"relative w-full max-w-md bg-slate-900 border border-white/10 rounded-2xl shadow-2xl"},oe={class:"grid grid-cols-2 gap-4"},le={key:0,class:"mt-1 text-sm text-red-400"},re={class:"flex gap-3 pt-4"},ie=["disabled"],ne={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},ae={class:"relative w-full max-w-md bg-slate-900 border border-white/10 rounded-2xl shadow-2xl"},de={class:"p-6 text-center"},ue={class:"bg-slate-800/50 rounded-xl p-4 text-left space-y-3 mb-6"},pe={class:"flex items-center justify-between"},xe={class:"flex items-center gap-2"},me={class:"text-white font-mono text-sm"},be={class:"flex items-center justify-between"},fe={class:"flex items-center gap-2"},ce={class:"text-green-400 font-mono font-bold"},ve={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},ge={class:"relative w-full max-w-sm bg-slate-900 border border-white/10 rounded-2xl shadow-2xl p-6 text-center"},we={class:"text-slate-400 mb-6"},he={class:"text-white font-medium"},ke={class:"flex gap-3"},Ue={__name:"Users",props:{users:{type:Array,default:()=>[]}},setup(k){const U=$(),d=x(!1),u=x(!1),v=x(!1),f=x(null),p=x({email:"",password:""}),o=T({name:"",apellidos:"",ci:"",email:"",phone:""}),B=()=>{o.post(route("tenant.users.store"),{onSuccess:()=>{d.value=!1;const a=U.props.flash;a?.generated_password&&(p.value={email:a.admin_email,password:a.generated_password},v.value=!0),o.reset()}})},V=a=>{f.value=a,u.value=!0},z=()=>{_.delete(route("tenant.users.destroy",f.value.id),{onSuccess:()=>{u.value=!1,f.value=null}})},y=a=>{navigator.clipboard.writeText(a)};return(a,t)=>(r(),i(M,null,[C(l(A),{title:"Usuarios"}),C(H,null,{header:j(()=>[...t[14]||(t[14]=[e("h1",{class:"text-2xl font-bold text-white"},"Gestión de Usuarios",-1)])]),default:j(()=>[e("div",L,[t[16]||(t[16]=e("div",{class:"flex-1"},[e("p",{class:"text-slate-400"},"Gestiona los usuarios de tu empresa que pueden acceder al CRM.")],-1)),e("button",{onClick:t[0]||(t[0]=s=>d.value=!0),class:"flex items-center justify-center gap-2 px-6 py-3 rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-medium hover:from-indigo-500 hover:to-purple-500 transition-all shadow-lg shadow-indigo-500/25"},[...t[15]||(t[15]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),w(" Nuevo Usuario ",-1)])])]),e("div",D,[k.users.length?(r(),i("div",E,[e("table",F,[t[18]||(t[18]=e("thead",{class:"bg-slate-700/30"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-medium text-slate-400 uppercase tracking-wider"},"Usuario"),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-slate-400 uppercase tracking-wider"},"CI"),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-slate-400 uppercase tracking-wider"},"Rol"),e("th",{class:"px-6 py-4 text-right text-xs font-medium text-slate-400 uppercase tracking-wider"},"Acciones")])],-1)),e("tbody",G,[(r(!0),i(M,null,N(k.users,s=>(r(),i("tr",{key:s.id,class:"hover:bg-white/5 transition-colors"},[e("td",R,[e("div",I,[e("div",P,[e("span",J,n(s.name?.charAt(0)),1)]),e("div",null,[e("p",K,n(s.name)+" "+n(s.apellidos),1),e("p",O,n(s.email),1)])])]),e("td",Q,n(s.ci||"-"),1),e("td",W,[e("span",{class:q([s.role?.name==="tenant_admin"?"bg-indigo-500/20 text-indigo-400 border-indigo-500/30":"bg-slate-500/20 text-slate-400 border-slate-500/30","px-3 py-1 rounded-full text-xs font-medium border"])},n(s.role?.label||"Usuario"),3)]),e("td",X,[s.role?.name!=="tenant_admin"?(r(),i("button",{key:0,onClick:ye=>V(s),class:"p-2 rounded-lg text-slate-400 hover:text-red-400 hover:bg-red-500/10 transition-colors"},[...t[17]||(t[17]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Y)):(r(),i("span",Z,"Admin"))])]))),128))])])])):(r(),i("div",ee,[t[20]||(t[20]=e("div",{class:"mx-auto h-20 w-20 rounded-full bg-slate-700/50 flex items-center justify-center mb-4"},[e("svg",{class:"h-10 w-10 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})])],-1)),t[21]||(t[21]=e("h3",{class:"text-lg font-semibold text-white mb-2"},"No hay usuarios",-1)),t[22]||(t[22]=e("p",{class:"text-slate-400 mb-4"},"Agrega usuarios para que puedan acceder al CRM",-1)),e("button",{onClick:t[1]||(t[1]=s=>d.value=!0),class:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-indigo-600 text-white text-sm hover:bg-indigo-500 transition-colors"},[...t[19]||(t[19]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),w(" Agregar Usuario ",-1)])])]))]),(r(),g(h,{to:"body"},[d.value?(r(),i("div",te,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t[2]||(t[2]=s=>d.value=!1)}),e("div",se,[t[28]||(t[28]=e("div",{class:"p-6 border-b border-white/10"},[e("h3",{class:"text-xl font-semibold text-white"},"Nuevo Usuario"),e("p",{class:"text-sm text-slate-400 mt-1"},"Se generará una contraseña automática")],-1)),e("form",{onSubmit:S(B,["prevent"]),class:"p-6 space-y-4"},[e("div",oe,[e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Nombre *",-1)),m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l(o).name=s),type:"text",required:"",placeholder:"Juan",class:"w-full rounded-xl bg-slate-800/50 border border-white/10 px-4 py-3 text-white placeholder-slate-500 focus:border-indigo-500 focus:ring-indigo-500 focus:ring-1"},null,512),[[b,l(o).name]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Apellidos *",-1)),m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l(o).apellidos=s),type:"text",required:"",placeholder:"Pérez",class:"w-full rounded-xl bg-slate-800/50 border border-white/10 px-4 py-3 text-white placeholder-slate-500 focus:border-indigo-500 focus:ring-indigo-500 focus:ring-1"},null,512),[[b,l(o).apellidos]])])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"CI *",-1)),m(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l(o).ci=s),type:"text",required:"",placeholder:"12345678",class:"w-full rounded-xl bg-slate-800/50 border border-white/10 px-4 py-3 text-white placeholder-slate-500 focus:border-indigo-500 focus:ring-indigo-500 focus:ring-1"},null,512),[[b,l(o).ci]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Correo *",-1)),m(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>l(o).email=s),type:"email",required:"",placeholder:"usuario@empresa.com",class:"w-full rounded-xl bg-slate-800/50 border border-white/10 px-4 py-3 text-white placeholder-slate-500 focus:border-indigo-500 focus:ring-indigo-500 focus:ring-1"},null,512),[[b,l(o).email]]),l(o).errors.email?(r(),i("p",le,n(l(o).errors.email),1)):c("",!0)]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Teléfono",-1)),m(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>l(o).phone=s),type:"text",placeholder:"+591 70000000",class:"w-full rounded-xl bg-slate-800/50 border border-white/10 px-4 py-3 text-white placeholder-slate-500 focus:border-indigo-500 focus:ring-indigo-500 focus:ring-1"},null,512),[[b,l(o).phone]])]),e("div",re,[e("button",{type:"button",onClick:t[8]||(t[8]=s=>d.value=!1),class:"flex-1 px-4 py-3 rounded-xl border border-white/10 text-slate-300 hover:bg-white/5 transition-colors"}," Cancelar "),e("button",{type:"submit",disabled:l(o).processing,class:"flex-1 px-4 py-3 rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-medium hover:from-indigo-500 hover:to-purple-500 disabled:opacity-50 transition-all"},n(l(o).processing?"Creando...":"Crear Usuario"),9,ie)])],32)])])):c("",!0)])),(r(),g(h,{to:"body"},[v.value?(r(),i("div",ne,[t[36]||(t[36]=e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm"},null,-1)),e("div",ae,[e("div",de,[t[33]||(t[33]=e("div",{class:"mx-auto h-16 w-16 rounded-full bg-green-500/20 flex items-center justify-center mb-4"},[e("svg",{class:"h-8 w-8 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),t[34]||(t[34]=e("h3",{class:"text-xl font-semibold text-white mb-2"},"¡Usuario Creado!",-1)),t[35]||(t[35]=e("p",{class:"text-slate-400 mb-6"},"Guarda estas credenciales:",-1)),e("div",ue,[e("div",pe,[t[30]||(t[30]=e("span",{class:"text-sm text-slate-400"},"Correo:",-1)),e("div",xe,[e("span",me,n(p.value.email),1),e("button",{onClick:t[9]||(t[9]=s=>y(p.value.email)),class:"p-1 hover:bg-white/10 rounded"},[...t[29]||(t[29]=[e("svg",{class:"h-4 w-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)])])])]),e("div",be,[t[32]||(t[32]=e("span",{class:"text-sm text-slate-400"},"Contraseña:",-1)),e("div",fe,[e("span",ce,n(p.value.password),1),e("button",{onClick:t[10]||(t[10]=s=>y(p.value.password)),class:"p-1 hover:bg-white/10 rounded"},[...t[31]||(t[31]=[e("svg",{class:"h-4 w-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)])])])])]),e("button",{onClick:t[11]||(t[11]=s=>v.value=!1),class:"w-full px-4 py-3 rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-medium hover:from-indigo-500 hover:to-purple-500 transition-all"}," Entendido ")])])])):c("",!0)])),(r(),g(h,{to:"body"},[u.value?(r(),i("div",ve,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t[12]||(t[12]=s=>u.value=!1)}),e("div",ge,[t[38]||(t[38]=e("div",{class:"mx-auto h-16 w-16 rounded-full bg-red-500/20 flex items-center justify-center mb-4"},[e("svg",{class:"h-8 w-8 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),t[39]||(t[39]=e("h3",{class:"text-xl font-semibold text-white mb-2"},"¿Eliminar usuario?",-1)),e("p",we,[t[37]||(t[37]=w("Se eliminará a ",-1)),e("span",he,n(f.value?.name),1)]),e("div",ke,[e("button",{onClick:t[13]||(t[13]=s=>u.value=!1),class:"flex-1 px-4 py-3 rounded-xl border border-white/10 text-slate-300 hover:bg-white/5 transition-colors"}," Cancelar "),e("button",{onClick:z,class:"flex-1 px-4 py-3 rounded-xl bg-red-600 text-white font-medium hover:bg-red-500 transition-colors"}," Eliminar ")])])])):c("",!0)]))]),_:1})],64))}};export{Ue as default};
